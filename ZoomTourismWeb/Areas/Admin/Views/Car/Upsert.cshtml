@using ZoomTourism.Models;


@model ZoomTourism.Models.ViewModels.CarVM
@{
    ViewData["Title"] = "Upsert Car";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Upsert" method="post" enctype="multipart/form-data">
    <input asp-for="Car.Id" hidden />
    <div class="form-group">
        <label asp-for="Car.CarBrand">Car Brand</label>
        <input asp-for="Car.CarBrand" class="form-control" />
        <span asp-validation-for="Car.CarBrand" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.ModelName">Model Name</label>
        <input asp-for="Car.ModelName" class="form-control" />
        <span asp-validation-for="Car.ModelName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.ModelYear">Model Year</label>
        <input asp-for="Car.ModelYear" class="form-control" />
        <span asp-validation-for="Car.ModelYear" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.TypeOfTransmission">Type of Transmission</label>
        <input asp-for="Car.TypeOfTransmission" class="form-control" />
        <span asp-validation-for="Car.TypeOfTransmission" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.NumOfSeats">Number of Seats</label>
        <input asp-for="Car.NumOfSeats" class="form-control" />
        <span asp-validation-for="Car.NumOfSeats" class="text-danger"></span>
    </div>

    <!-- ... (Previous input fields) ... -->

    <div class="form-group">
        <label asp-for="Car.TypeOfFuel">Type of Fuel</label>
        <input asp-for="Car.TypeOfFuel" class="form-control" />
        <span asp-validation-for="Car.TypeOfFuel" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.SecurityDeposit">Security Deposit</label>
        <input asp-for="Car.SecurityDeposit" class="form-control" />
        <span asp-validation-for="Car.SecurityDeposit" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.ExcessClaim">Excess Claim</label>
        <input asp-for="Car.ExcessClaim" class="form-control" />
        <span asp-validation-for="Car.ExcessClaim" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.MilageCharge">Milage Charge</label>
        <input asp-for="Car.MilageCharge" class="form-control" />
        <span asp-validation-for="Car.MilageCharge" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.MinimumEligibleAge">Minimum Eligible Age</label>
        <input asp-for="Car.MinimumEligibleAge" class="form-control" />
        <span asp-validation-for="Car.MinimumEligibleAge" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.InsuranceIncluded">Insurance Included</label>
        <input asp-for="Car.InsuranceIncluded" type="checkbox" />
    </div>

    <div class="form-group">
        <label asp-for="Car.DailyCharge">Daily Charge</label>
        <input asp-for="Car.DailyCharge" class="form-control" />
        <span asp-validation-for="Car.DailyCharge" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Car.WeeklyCharge">Weekly Charge</label>
        <input asp-for="Car.WeeklyCharge" class="form-control" />
        <span asp-validation-for="Car.WeeklyCharge" class="text-danger"></span>
    </div>

    <div class="inputQue">
        <label>Thumbnail</label>

        <input asp-for="Car.CarCardImage" id="uploadBox" type="file" name="file" placeholder="ImageUrl">
    </div>

    <div class="form-group">
        <label asp-for="Car.MonthlyCharge">Monthly Charge</label>
        <input asp-for="Car.MonthlyCharge" class="form-control" />
        <span asp-validation-for="Car.MonthlyCharge" class="text-danger"></span>
    </div>
   @*  <input type="hidden" asp-for="Car.ExistingImageUrls" />
    @foreach (var imageUrl in Model.Car.ExistingImageUrls)
    {
        <div>
            <img src="@imageUrl" alt="Existing Image" style="max-width: 200px; max-height: 200px;" />
            <button type="button" class="btn btn-danger" onclick="removeImage('@imageUrl')">Remove</button>
        </div>
    } *@
    <!-- Input for uploading multiple images -->
    <div class="form-group">
        <label for="images">Upload Images</label>
        <input type="file" id="images" name="images" multiple class="form-control-file" onchange="validateFileCount(this)" />
        <span id="fileCountError" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
</form>

<a asp-action="Index">Back to List</a>


            <script>
    function validateFileCount(input) {
        var maxFiles = 6; // Maximum number of allowed files
        var fileCountError = document.getElementById("fileCountError");
        var selectedFiles = input.files;

        if (selectedFiles.length > maxFiles) {
            // Display an error message
            fileCountError.textContent = "Maximum of 6 files allowed.";
            input.value = ""; // Clear the selected files
        } else {
            fileCountError.textContent = ""; // Clear the error message
        }
    }
</script>
