@model ZoomTourism.Models.ViewModels.TripVM
@{
    var a = 3;
    var filteredTrips = Model.Trips.Where(Trip => Trip.Id != Model.trip.Id).Take(a).ToList();

}
<head>

    <title>@Model.trip.Title</title>
    <meta name="description" content="@Model.trip.Title">
    <meta name="keywords" content="Writing, Blog, Blogs, @Model.trip.Title">
    <link rel="stylesheet" href="~/css/index.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/TripDetails.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/CarDetails.css" asp-append-version="true" />
</head>

<div class="Event-Details">

    <div class="Thumbnail">
        <img src="@Model.trip.ImageUrl" height="450px" alt="@Model.trip.ImageUrl" draggable="false">
    </div>

    <div class="EventInfo">
        <div class="Title-CTA">
            <div class="Title-Date">
                <h1>Visit the awesome @Model.trip.Title</h1>
            </div>
            <div class="CTA-BTN">
                <button><img src="~/assets/Icons/Sharebtn3.png" alt="share btn"></button>
            </div>

        </div>

        <div class="Event-Details-Sec-2">
            <!-- Left Side -->
            <div class="Event-Details-Sec-Left">


                <p>
                    @Html.Raw(Model.trip.Content)
                </p>

            </div>

            <!-- Right Side -->
            <div class="Event-Details-Sec-Right">
                <div class="Reserve-btn">
                    <div class="form-container">
                        <div class="trip-details">
                            <div style="
                                 width: 70%;">
                                <label class="form-label" for="full-name">Name Surname:</label>
                                <input class="form-input" type="text" id="full-name">
                            </div >
                            <div style="
                                 width: 70%;">
                                <label class="form-label" for="phone-number">Phone Number:</label>
                                <input class="form-input" type="text" id="phone-number">
                            </div>
                            <div style="
                                 width: 70%;">
                                <label class="form-label" for="origin-location">Where Are You From:</label>
                                <select class="form-input" id="origin-location">
                                    <option value="">Select a country</option>
                                </select>
                            </div>
                           

                            

                            

                            <button id="whatsapp-button">WhatsApp</button>
                        </div>
                    </div>
                </div>
            </div>



        </div>
    </div>

</div>

<section class="other-cars">
    <h3>Other Destinations</h3>
    <div class="carousel-container">
        
        @foreach (var Trip in filteredTrips)
        {
            if (Trip.Id != Model.trip.Id)
            {
                <a asp-action="TripDetails" asp-route-id="@Trip.Id" class="carousel-item-details">
                    <div class="Thumbnail-trip">
                        @if (Trip.Price != 0 || Trip.Price != null)
                        {
                            <span>@Trip.Price</span>
                        }
                        <img src="@Trip.ImageUrl" alt="@Trip.Title">
                    </div>

                    <div class="trip-description">
                        <div class="trip-title">
                            <h3>Enjoy the Beauty of @Trip.Title</h3>
                            <p>@Trip.Title</p>
                        </div>

                        <div class="rating">
                            <div class="star-rating"><img src="~/assets/Icons/StarReview.png" alt="star">4.6</div>
                            <span>(@Trip.numOfReviews)</span>
                        </div>
                    </div>


                </a>
               @*  <div class="carousel-item-mobile">
                    @if (Trip.Price != 0 || Trip.Price != null)
                    {
                        <span class="price-tag">@Trip.Price</span>
                    }

                    <div class="trip-description-mobile">

                        <div class="trip-title-mobile">
                            <h3>@Trip.Title</h3>
                        </div>

                        <div class="rating-mobile">
                            <div class="star-rating-mobile"><img src="~/assets/Icons/StarReview.png" alt="star">4.6</div>
                            <span>(@Trip.numOfReviews)</span>
                        </div>

                    </div>

                    <div class="image-container">
                        <img class="Thumbnail-trip-mobile" height="300px" src="@Trip.ImageUrl" alt="@Trip.Title">
                    </div>
                </div> *@
            }
           

        }
    </div>
</section>
<script>
    fetch("https://restcountries.com/v3.1/all")
        .then(response => response.json())
        .then(data => {
            // Sort the countries alphabetically by name
            data.sort((a, b) => a.name.common.localeCompare(b.name.common));

            const select = document.getElementById("origin-location");

            // Iterate through the sorted list of countries and create options
            data.forEach(country => {
                if (country.name.common !== "Israel") {
                    const option = document.createElement("option");
                    option.value = country.cca2; // Use the country code as the value
                    option.textContent = country.name.common; // Display the full country name
                    select.appendChild(option);
                }
            });
        })
        .catch(error => console.error("Error fetching country data: " + error));
    document.getElementById("whatsapp-button").addEventListener("click", function () {
        const fullName = document.getElementById("full-name").value;
        const phoneNumber = document.getElementById("phone-number").value;
        const originLocation = document.getElementById("origin-location").value;

        if (!fullName) {
            alert("Please enter your Name Surname.");
            return;
        }

        if (!phoneNumber) {
            alert("Please enter your Phone Number.");
            return;
        }

        if (!originLocation) {
            alert("Please select your country.");
            return;
        }

        // Continue with WhatsApp message generation and URL opening
        // ...

        // If everything is valid, proceed with generating the WhatsApp message and opening the URL
        const message = `Hi, I am from ${originLocation} and my name is ${fullName}. My phone number is ${phoneNumber}. Can you assist me with something?`;
        const whatsappURL = `https://wa.me/+905388782103/?text=${encodeURIComponent(message)}`;
        window.open(whatsappURL);
    });

</script>
@section Scripts{
    <script>
        var currentPage = "TripDetails";
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="~/js/IndexTranslation.js"></script>
  

}
